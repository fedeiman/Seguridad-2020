##### Ej 2
Para comenzar el segundo ejericicio lo primero que hicimos fue correr nmap sobre nuestra red local para ver que ip habia tomado la maquina virtual. Para esto usamos `sudo nmap -sn 192.168.0.0/24`, correrlo con sudo nos da la ventaja de tambien listar los hostnames de cada ip y asi logramos conseguir aquel que decia "Oracle VirtualBox virtual NIC". Una vez que conocimos la ip de la maquina virtual hicimos un escaneo de todos los puertos con `nmap -p0-65535 192.168.0.208`, este tipo de escaneo busca todos los puertos tcp en el rango completo. Luego de correr el escaneo descubrimos que solo hay 4 puertos tcp aparentemente abiertos: 

 - Un servidor ftp en el puerto 21
 - Un servidor ssh en el puerto 22
 - Un servidor http en el puerto 80 y 8000
Tanto el servidor ftp como el servidor ssh tenian usuarios y contraseñas asi que los dejamos de lado por ahora. El puerto 8000 simplemente nos daba un mensaje de forbidden (403) asi que nos enfocamos en el 80.
		En el puerto 80 encontramos una pagina web con estructura de carpeta en donde habia 3 rutas. Una de ellas era nasa que nos llevo a una pagina que parecia nunca parar de cargar. Otra era pligg que nos llevo a un cms que parecia estar funcionando bien. La tercera, "important" fue en la primera que nos enfocamos ya que adentro habia otra carpeta llamada ajaxfilemanager en donde habia varios scripts de php que se ejecutaban (nos parecio importante ya que si logramos subir un archivo a este directorio el servidor lo iba a ejecutar). Tambien vimos que el archivo ajax_preview.php estaba filtrando informacion sobre la ruta dentro del servidor donde se encontraba esta carpeta, en particular, ahora sabemos que se encuentra en "/var/www/html/important/ajaxfilemanager". Fuera de esto intentamos usar algunos de los archivos de upload y download para subir o descargar archivos sin exito, el ajaxfilemanager.php simplemente tiraba un error al no encontrar la carpeta uploaded asi que dejamos esta rama de lado por el momento.
Cuando nos pusimos a investigar pligg descubrimos que era un cms que dejo de ser popular hace años, los cual llevaba a la posibilidad que con las pocas actualizaciones hubiese huecos de seguridad. Efectivamente buscando en exploit-db encontramos dos vulnerabilidades que nos interesaron. Una era de path traversal y remote code execution pero requeria credenciales de administrador, mientras que la otra era una sql-injection que no requeria credenciales. Para realizar la sql-injection utilizamos sqlmap con el siguiente comando  `sqlmap -u "http://192.168.0.208/pligg/story.php?title=secret-war&reply=1&comment_id=1" --threads 4`
lo cual nos dijo que el sitio era vulnerable a ataques del tipo boolean based y time-based. Luego corrimos `sqlmap -u "url-Vulnerable" --privileges` para analizar los privilegios que tenia el usuario que estaba manejando la db. Ahi fe donde obtuvimos que el usuario "pepe" solo tenia permisos de "USAGE" es decir basicamente no tenia permisos muchos permisos, no podiamos descargar ni subir archivos con sqlmap. Lo que hicimos despues entonces fue  analizar las tablas presentes en base de datos con `sqlmap -u "url_Vulnerable" --tables --threads 4`. Esto nos dio todas tablas presentes en la base de datos (los resultados que fuimos encontrando se encuentran en sqlmap_log) y nos enfocamos en dumpear la llamada "pligg_users". De ahi obtuvimos el hash "1bf490bb34c2383ac91e67505741b9cdad3b9bee87e62ba98" del usuario administrador "bobama@nsa.gov.us". Luego de romper el hash (con mucho esfuerzo y intentos fallidos durante dias) obtuvimos la password "obamaobamaobama" del admin.
